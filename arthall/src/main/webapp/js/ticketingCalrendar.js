"use strict";var calendarContainer=document.getElementById("calendarContainer"),calendars=calendarContainer.querySelector(".calendarContainer__calendars"),prevContainer=calendars.querySelector(".calendars__prevContainer"),nextContainer=calendars.querySelector(".calendars__nextContainer"),prevMonthText=prevContainer.querySelector(".month__text"),prevCalBody=prevContainer.querySelector(".prevCalBody"),nextCalBody=nextContainer.querySelector(".nextCalBody"),btnNext=calendarContainer.querySelector(".calBtn__next"),btnPrev=calendarContainer.querySelector(".calBtn__prev"),period=document.getElementById("period"),finished={today:new Date,monForChange:new Date().getMonth(),getFirstDay:function getFirstDay(yy,mm){return new Date(yy,mm,1)},getLastDay:function getLastDay(yy,mm){return new Date(yy,mm+1,0)},nextMonth:function nextMonth(){var d=new Date;return d.setDate(1),d.setMonth(++this.monForChange),d},prevMonth:function prevMonth(){var d=new Date;return d.setDate(1),d.setMonth(this.monForChange-=3),d},addZero:function addZero(num){return 10>num?"0"+num:num}//    activeDTag: null,
};function moveCalendar(e){if(e.preventDefault(),this.classList.contains("calBtn__next"))createCalendar(finished.nextMonth(),prevContainer),createCalendar(finished.nextMonth(),nextContainer),btnPrev.classList.remove("disable");else{var prevMonthFdata=prevMonthText.getAttribute("data-fdate"),prevMonthFdataArray=prevMonthFdata.split("."),prevMonthDate=new Date(prevMonthFdataArray[0],prevMonthFdataArray[1]-1,0,0,0,0,0),thisMonthDate=new Date(finished.today.getFullYear(),finished.today.getMonth()+1,0,0,0,0,0);if(prevMonthDate.getTime()<=thisMonthDate.getTime())btnPrev.classList.add("disable"),e.preventDefault();else{createCalendar(finished.prevMonth(),prevContainer),createCalendar(finished.nextMonth(),nextContainer);var _prevMonthFdata=prevMonthText.getAttribute("data-fdate"),_prevMonthFdataArray=_prevMonthFdata.split("."),_prevMonthDate=new Date(_prevMonthFdataArray[0],_prevMonthFdataArray[1]-1,0,0,0,0,0),_thisMonthDate=new Date(finished.today.getFullYear(),finished.today.getMonth()+1,0,0,0,0,0);_prevMonthDate.getTime()<=_thisMonthDate.getTime()&&(btnPrev.classList.add("disable"),e.preventDefault())}}showPeriod(),activeTd()}function resultDate(element){var resultDateValue=element.getAttribute("data-fdate"),resultDateBox=document.getElementById("resultBox__date");resultDateBox.value=resultDateValue}function showTimeList(){var timeListContainer=document.querySelector(".timeInfo__timeTable"),timeList=timeListContainer.querySelectorAll(".timeTable__list");timeList.forEach(function(e){return e.style.display="block"})}function tdClassHandler(){var allTd=calendars.querySelectorAll("td");allTd.forEach(function(element){element.classList.contains("able")&&element.classList.remove("active")}),this.classList.add("active"),resultDate(this),showTimeList()}function activeTd(){var allTd=calendars.querySelectorAll("td");allTd.forEach(function(element){element.classList.contains("able")&&element.addEventListener("click",tdClassHandler)})}function showPeriod(){var allTd=calendars.querySelectorAll("td"),periodArray=period.innerText.split("~"),lastPeriod=periodArray[1],lastArray=lastPeriod.split("."),lastYear=+lastArray[0],lastMonth=+lastArray[1],lastDate=+lastArray[2],toDate=new Date(finished.today.getFullYear(),finished.today.getMonth()+1,finished.today.getDate(),0,0,0,0),lastPeriodDate=new Date(lastYear,lastMonth,lastDate,0,0,0,0);allTd.forEach(function(e){var tdFdate=e.getAttribute("data-fdate");if(tdFdate){var tdFdateArray=tdFdate.split("."),tdYear=tdFdateArray[0],tdMonth=tdFdateArray[1],tdDate=tdFdateArray[2],tdFullDate=new Date(tdYear,tdMonth,tdDate,0,0,0,0);tdFullDate.getTime()>=toDate.getTime()&&tdFullDate.getTime()<=lastPeriodDate.getTime()&&(e.classList.remove("disable"),e.classList.add("able"))}})}function createCalendar(fullDate,Container){var monthText=Container.querySelector(".month__text"),calBody=Container.querySelector(".calBody"),yy=fullDate.getFullYear(),mm=fullDate.getMonth(),firstDay=finished.getFirstDay(yy,mm),lastDay=finished.getLastDay(yy,mm),markToday=void 0;mm===finished.today.getMonth()&&yy===finished.today.getFullYear()&&(markToday=finished.today.getDate()),monthText.innerText=yy+"\uB144 "+(mm+1)+"\uC6D4",monthText.setAttribute("data-fdate",yy+"."+(mm+1));for(var trtd="",startCount=void 0,countDay=0,i=0;6>i;i++){trtd+="<tr>";for(var j=0;7>j;j++){if(0!==i||startCount||j!==firstDay.getDay()||(startCount=1),!startCount)trtd+="<td>";else{var _fullDate=yy+"."+finished.addZero(mm+1)+"."+finished.addZero(countDay+1);//                let fullDate = yy + '.' + (mm + 1) + '.' + (countDay + 1);
trtd+="<td class=\"dates disable",trtd+=markToday&&markToday===countDay+1?" today\" ":"\"",trtd+=" data-date=\""+(countDay+1)+"\" data-fdate=\""+_fullDate+"\">"}trtd+="<span>"+(startCount?++countDay:"")+"</span>",countDay===lastDay.getDate()&&(startCount=0),trtd+="</td>"}trtd+="</tr>"}return calBody.innerHTML=trtd,calBody}function showCalendar(){createCalendar(finished.today,prevContainer),createCalendar(finished.nextMonth(),nextContainer)}function init(){showCalendar(),showPeriod(),activeTd(),btnPrev.addEventListener("click",moveCalendar),btnNext.addEventListener("click",moveCalendar)}init();